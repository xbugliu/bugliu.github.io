<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Octopress | 书写|记下人生痕迹]]></title>
  <link href="http://towriting.com/blog/categories/octopress/atom.xml" rel="self"/>
  <link href="http://towriting.com/"/>
  <updated>2013-11-17T18:47:31+08:00</updated>
  <id>http://towriting.com/</id>
  <author>
    <name><![CDATA[ToWriting]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Openshift小技巧-热部署]]></title>
    <link href="http://towriting.com/blog/2013/10/21/openshift-tips/"/>
    <updated>2013-10-21T22:24:00+08:00</updated>
    <id>http://towriting.com/blog/2013/10/21/openshift-tips</id>
    <content type="html"><![CDATA[<p>最近试着用Openshift搭建了一个Octopress程序，搭建成功后，发现每次部署时，都会引起站点临时无法访问，这是自己使用Github的pages时没遇到的事情，用Google快速搜索下，原来要用热部署（hot deploy)实现不重启openshift程序部署文件，官方是支持的，方法很简单：</p>

<ol>
<li>切换到你的Openshift程序根目录</li>
<li>创建文件hot_deploy到指定目录：</li>
</ol>


<p><code>bash
touch .openshift/markers/hot_deploy
</code></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[octopress定制公益404页面]]></title>
    <link href="http://towriting.com/blog/2013/08/04/octopress-custom-404/"/>
    <updated>2013-08-04T00:10:00+08:00</updated>
    <id>http://towriting.com/blog/2013/08/04/octopress-custom-404</id>
    <content type="html"><![CDATA[<p>一向不认为自己是一个有社会责任感的人，但为什么要接入公益404页面？那是因为我的博客托管在Github上，有一次输错自己博客文章的链接，一下子跑到了Github的默认404上，感觉很突兀。所以自己想定制一个404，而现在公益404很流行，举手之劳，何乐不为。</p>

<h2>1. 创建404页面</h2>

<p>首先，需要创建自定义的404页面，最初我是这样创建的，将404错误页面创建到source目录下的error目录
<code>bash
rake new_page[error/404.html]
</code>
创建一个新的目录error专门保存错误页面，有两个好处。1是存储结构清晰，2是可以在robots.txt将整个目录Disallow掉。</p>

<p>但后来看到github自定义404页面的<a href="https://help.github.com/articles/custom-404-pages">说明</a>，404页面必须放在网站根目录下，所以必须将404页面创建到source目录下：
<code>bash
rake new_page[404.html]
</code></p>

<h2>2. Robots文件隐藏404页面</h2>

<p>404页面异常页面，所谓家丑不可外扬，此页面无需搜索引擎爬虫知道。编辑robots.txt文件，添加404页面的Disallow：</p>

<h2>```bash</h2>

<h2>layout: nil</h2>

<p>User-agent: *
Disallow: /404.html</p>

<p>Sitemap: http://towriting.com/sitemap.xml
```</p>

<h2>3. 网站地图中隐藏掉404页面</h2>

<p>同样网站地图也不需要包含添加404页面。打开plugins/sitemap_generator.rb，找到EXCLUDED_FILES，然后添加404.html。
```ruby</p>

<h1>Change SITEMAP_FILE_NAME if you would like your sitemap file</h1>

<h1>to be called something else</h1>

<p>SITEMAP_FILE_NAME = &ldquo;sitemap.xml&rdquo;</p>

<h1>Any files to exclude from being included in the sitemap.xml</h1>

<p>EXCLUDED_FILES = [&ldquo;atom.xml&rdquo;, &ldquo;404.html&rdquo;]</p>

<h1>Any files that include posts, so that when a new post is added, the last</h1>

<h1>modified date of these pages should take that into account</h1>

<p>PAGES_INCLUDE_POSTS = [&ldquo;index.html&rdquo;]
```</p>

<h2>4. 定制公益404页面</h2>

<p>我选择的是<a href="http://www.qq.com/404/">腾讯公益404</a>，进入这个<a href="http://www.qq.com/404/">网站</a>拷贝其提供的JS代码，只需将其嵌入到我们的404页面(404.html)即可。下面是我修改过的404页面，把header、footer、comments等都去掉，只显示一个标题和公益广告：</p>

<h2>```bash</h2>

<p>layout: page
title: &ldquo;&rdquo;
header: false
date: 2013-08-04 00:08
comments: false
sharing: false</p>

<h2>footer: false</h2>

<center><h1>ToWriting.com 404!</h1></center>


<script type="text/javascript" src="http://www.qq.com/404/search_children.js?edition=small" charset="utf-8"></script>


<p>```</p>
]]></content>
  </entry>
  
</feed>
