---
title: "Prometheus监控系统总结"
date: 2022-03-13T19:06:07+08:00
draft: true
---


## 监控的两要素：
1. 查看系统当前(历史)的运行情况
2. 系统异常时给出告警

通过两要素可使系统具备可观测性，并及时反馈系统异常。监控的目的是为了达到性能目标和维稳。

## 目标

监控是一种手段，目标才是目的。上监控之前要清晰的了解，系统应该达成哪些目标，稳定性应达成哪些目标。对于目标按层次分成3类：

* ### 业务目标
   业务目标，是最高层次的目标，如PV, UV，在线用户数，乃至日营收等，其关乎产品是否有价值，是否符合团队预期。业务目标总是伴随着一些限定条件，比如时间点、投入人力、投入机器资源等。业务指标应该是项目、产品、开发负责人一起指定出来的。

* ### 性能目标
   性能指标，服务于业务指标，如接口耗时，接口成功率，页面加载耗时等。性能指标直接关乎产品是否好用，主要应该由开发和测试制定目标，然后由开发负责。
   性能指标往往会有取舍，比如延迟低但吞吐量大，入库慢但查询快，需结合场景去权衡。性能指标也要限制条件，主要是硬件资源、并发量、数据量，没有限定条件的指标是没有意义的。对于耗时，除了平均，业界往往用百分位（tp95, tp99）来观察抖动情况。

* ### 稳定性目标
   稳定性同样服务于业务指标，性能很好，但服务总是不可用是没有意义的。系统整体的服务稳定性(SLA)、机器的负载，磁盘的剩余容量都是稳定性需要关注的。稳定性应该是开发和运维一起制定和负责的。

   稳定性指标需要防患未然，如磁盘占用空间，磁盘的使用寿命，在当前时刻不会影响系统性能，但将来的某个时刻有概率会出问题，这个是需要关心的。

## Prometheus

Prometheus是一种工具，可以用来监控以上三种目标。


