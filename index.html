
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>书写|记下人生痕迹</title>
  <meta name="author" content="ToWriting">

          
        <meta name="description" content="记录人生痕迹|分享技术心得 -- ToWriting.com. 一个立志独立思维的程序员的博客网站. 这里会记录下自己工作, 生活和回忆; 同时会分享编程等相关技术知识; 所有文章皆为原创或翻译.">
        <meta name="keywords" content="阅读,思考,书写,程序员,C++">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://towriting.com">
  <link href="/favicon.ico" rel="icon">

  <link href="/assets/bootstrap/css/spacelab.min.css" rel="stylesheet" type="text/css">
  <link href="/assets/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css">
  <link href="/assets/bootstrap/css/custom.css" rel="stylesheet" type="text/css">
  <link href="/assets/font-awesome/css/font-awesome.css" rel="stylesheet" type="text/css">
  <link href="/stylesheets/screen.css" rel="stylesheet" type="text/css">
  <link href="/stylesheets/github.css" rel="stylesheet" type="text/css">
  
  <link href="/atom.xml" rel="alternate" title="书写|记下人生痕迹" type="application/atom+xml">
  
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-42601840-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   class="no-sidebar"   data-spy="scroll">

  <div class="container">
    <header class="jumbotron subhead" id="overview">
      
<div class="subscribe">
  <table>
    <tr>
      <td><span>订阅: &nbsp;</span></td>
      
      
      <td><a href="/atom.xml" class="btn"><i class="icon-cog"></i> By RSS</a></td>
      
      
    </tr>
  </table>
</div>

<h1 class="title">ToWriting</h1>


      <div class="navbar">
  <div class="navbar-inner">
    <div class="container" style="width: auto;">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
      <div class="nav-collapse">
                <ul class="nav">
          <li><a href="/">Home</a></li>
          <li><a href="/blog/archives">Archives</a></li>
          <li><a href="/about">About</a></li>
        </ul>

        
          <form action="http://google.com/search" method="get" class="navbar-search pull-left">
            <fieldset role="search">
              <input type="hidden" name="q" value="site:towriting.com" />
              <input type="text" name="q" results="0" placeholder="Search" class="search-query span2" />
            </fieldset>
          </form>
        
        
      </div><!-- /.nav-collapse -->
    </div>
  </div><!-- /navbar-inner -->
</div>

    </header>
    <div id="main">
      <div id="content">
        
<div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/03/dock-project-experience/">Dock项目个人总结</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-05-03T22:55:00+08:00" pubdate data-updated="true">2014-05-03</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Dock说白了是电脑桌面上常驻的一个工作区，Dock的目的是占领用户的桌面，况且我们追赶的团队和追赶我们的团队都已做出Dock，所以应用宝必须也要做。关于应用宝Dock的具体进度、功能与界面不做介绍，现在从开发的角度讲一讲Dock项目两个月来的一点体会。</p>

<p>自己的角色：负责逻辑部分接口和整体框架的设计，及相关功能开发。</p>

<h3>可圈可点之处：</h3>

<hr />

<p><strong>1. 逻辑与界面完全分离</strong></p>

<p>Dock项目应该是，我们团队第一次在多人协作下，采用了界面与逻辑分离的开发方案。这样的好处是：降低了耦合，使开发简单化（做UI的无需关心逻辑，反之依然）。当然这样做必然会增加一些工作量，尤其是后来界面和逻辑分属不同进程，逻辑的接口必须做IPC转发。</p>

<p>逻辑与界面分离的方案，最重要的是定义好接口。</p>

<p><strong>2. 最小完备接口</strong></p>

<p>最小完备接口是我一贯主张的一种接口风格，因为一旦增加冗余的接口，并被客户端代码使用，那就很难移除了，势必造成接口膨胀。项目期间，主管提出接口要提前考虑、功能要丰富的建议，不过自己还是坚持了自己想法。因为加一个接口容易，去掉一个就难了，好比韩愈曾说的，从善如登、从恶如崩。</p>

<h3>败笔之处</h3>

<hr />

<p><strong>1. 任务分配粗略</strong></p>

<p>需求接下来，四个人开始做，一开始定下两个人做界面另两个做逻辑，但没有细化具体的产品细节、开发难度耗时等，也没有分配具体谁做什么事情，只是口头上大概分了一下。这极易导致任务分配不均和任务遗漏的现象。好的方法应该是，细化任务并明确责任，公诸于众。但团队积习如此，非朝夕可改。</p>

<p><strong>2. 线程的滥用</strong></p>

<p>线程滥用当然指逻辑部分。从进入应用宝团队初期，就发现代码中线程滥用，好似每天不开几个线程吃不下饭一般。所以最初Dock的逻辑代码的主框架考虑到了这点，以使后面添加具体业务时无需创建线程。但后期，需求的演变和功能的要求迫使不得不又增加了几个线程，其实有些线程是非必须的。而这些不必要的线程，往往会滋生一批Bug。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/04/27/the-gay-genius-review/">读《苏东坡传》</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-04-27T21:52:00+08:00" pubdate data-updated="true">2014-04-27</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>昨天在kindle上读完了<a href='http://www.amazon.cn/gp/product/B00D7X84MS/ref=as_li_tf_tl?ie=UTF8&camp=536&creative=3200&creativeASIN=B00D7X84MS&linkCode=as2&tag=bringmeluck-23' rel='external nofollow' target='_blank'>苏东坡传</a>，本以为千年前人物的传记，必简短：年代久远，事迹佚失，有甚可写。谁知此书篇幅不小，断断续续一月才读完，书中夹杂着大量苏东坡的文学作品：诗词和书信等，吾久不读古文，美感失，只好略过。</p>

<p>苏东坡留下了大量的文字，百姓也口口相传着他的轶事，细心严谨的林语堂以此推敲出苏东坡的一生。苏东坡漫长的一生虽坎坷精彩，但也不过如其词云：<strong>大江东去浪淘尽千古风流人物</strong>，读完苏东坡的一生，印象最深的却是如下两个细节：</p>

<h2>&ldquo;太快建立的友情不会长久&rdquo;</h2>

<p>这是苏东坡的妻子王弗在其结交章惇的时候给与他的忠告。当时，苏东坡少年成名，意气风发，想必并不会将这句话放在心里，不久与章惇成为不错的朋友，后来这个朋友让他吃进苦头。历史上章惇到底人品如何，无从得知，不过《苏东坡传》中后来章惇加入“王安石党&#8221;，与苏东坡形同水火，后来章惇得势，打压元祐党人，将苏东坡发配海南，恨不得搞死他。当时他们都年近花甲，想不通为何有如此大的仇怨，何况当时苏东坡丝毫无法威胁到他。</p>

<p>想到这里，突然觉得年轻时的苏东坡可能刺痛过章惇某些敏感的神经。章惇的出身不雅，是个私生子，所以儿时可能受尽奚落，致性格外强内卑。而苏东坡虽性格温婉，但年少轻狂，难免会有些许恃才傲物得罪于人而不自知。凡此种种，最终导致了自己颠沛，起伏的一生。不过人生的不幸，确成就了文坛上的一朵奇葩。</p>

<p>再回头看王弗这就话：太快建立的友情不会长久，是否可以反应她和苏东坡的爱情：太快建立的爱情不会长久。他和苏东坡一见钟情的概率不是很大，因为这桩婚姻是包办的。但一路走来，他们的感情是真挚的，有词为证：</p>

<blockquote><p>十年生死两茫茫。不思量。自难忘。千里孤坟，无处话凄凉。纵使相逢应不识，尘满面，鬓如霜。
夜来幽梦忽还乡。小轩窗。正梳妆。相顾无言，惟有泪千行。料得年年肠断处，明月夜，短松冈。</p></blockquote>

<p>话说这是鄙人高中最喜欢的词。</p>

<h2>人至将死</h2>

<p>另一个给我印象很深的细节是，东坡晚年被贬惠州，想要在住所种植一棵树。他对帮他移植树的人说：树不要太大，太大不容易活；也不要太小，太小自己等不及树长大。读这段时，自己内心戚然，无助感犹然而生。东坡也在很早之前已抒发过此种感慨：</p>

<blockquote><p>寄蜉蝣于天地，渺沧海之一粟。哀吾生之须臾，羡长江之无穷。</p></blockquote>

<p>须臾的人生，意义何在，聪明如苏东坡都想不通，你我又怎能明了！</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/04/18/who-use-stl/">谁在用C++ STL？</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-04-18T23:39:00+08:00" pubdate data-updated="true">2014-04-18</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>C++用了四年了，这两天才把<a href='http://www.amazon.cn/gp/product/B00DGLU91K/ref=as_li_tf_tl?ie=UTF8&camp=536&creative=3200&creativeASIN=B00DGLU91K&linkCode=as2&tag=bringmeluck-23' rel='external nofollow' target='_blank'>Effective STL</a>看了一遍。此书作为C++经典书系Effective三部曲之一，知名度与所受褒扬远不及另两本，个中缘由是否因为STL地位不济。所以今日以自己鄙陋的经历来谈一谈当前STL在C++程序员中的地位和使用状况。</p>

<p>大家知道STL中三大法宝：容器、迭代器和算法。我所经历的公司/团队STL的使用情况：</p>

<hr />

<table border="1">
<tr><th>序号</th><th>团队规模</th><th>项目规模</th><th>容器</th><th>迭代器</th><th>高级迭代器</th><th>算法</th><th>高级算法</th><th>funtional</th></tr>
<tr><th>1</th><td>5人以下,平均2年经验</td><td>10万以下</td><td>基本没有</td><td>基本没有</td><td>基本没有</td><td>基本没有</td><td>无</td><td>无</td></tr>
<tr><th>2</th><td>10人,平均2年经验</td><td>100万</td><td>较多</td><td>较多</td><td>较少</td><td>较少</td><td>极少</td><td>几无</td></tr>
<tr><th>3</th><td>10人,平均4年经验</td><td>100万</td><td>较多</td><td>较多</td><td>较少</td><td>极少</td><td>较少</td><td>有</td></tr>
</table>


<p>（注：表中迭代器是指通过begin和end获取interator，而高级迭代器指back_inserter等迭代器生成器和内置迭代器;算法指sort,foreach, 高级算法指算法带if的形式）</p>

<hr />

<p><strong>看来，STL并不受大家欢迎，至少在我所呆过的团队里是这样的，为何如此？</strong></p>

<h3>洪水猛兽 （守旧）</h3>

<p>容器（最简单的vector）几乎是大部分C++程序员最开始接触的STL组件，我也不例外。那是10年自己刚毕业那会儿，在一家公司实习，实现一个简单的图像显示和处理的Demo程序。里面图像数据最初是存储在原始的数组（char [])中。那一阵子在狂啃《C++ Primer》，里面提到C++程序员不应该使用这些原生的数组，应该用vector代替，于是自己将程序中的char []替换成了vector<char>。而后发现一些图像算法执行慢了好多，遂请教mentor，mentor是名校的doctor，不编程久已，他并没用过STL，但提出不要用STL，不要追时髦、偷懒，老老实实的写“C”代码就好了。</p>

<p>舔着第一次用STL的伤口，念着mentor的教诲，在这家公司的第一年里自己后来好像就不再关注和使用STL。同期的C++ Programmer共四人，一个工作1年，另两个更久些，那时我们在“不赶时髦”上很团结，大家愉快的使用着VC6，且都不使用STL。</p>

<p>这就是某些老式小型软件公司一些C++程序员对待STL的态度：排斥守旧，其中缘由高校的计算机教育脱不了干系。</p>

<p>当然有个人和特殊业务场景也会排斥STL：<a href="http://www.zhihu.com/question/20201972">为何某些公司不容许使用C++ STL</a>。</p>

<h3>玄之又玄 （畏惧）</h3>

<p>C++本来有有很多不易掌握的细节。而STL同样如此，简单强大，但有微妙的陷阱。就拿Effective STL来说，条款1：慎重的选择容器类型中，就有大量自己不曾掌握模棱两可的点：</p>

<ul>
<li>string的swap会导致迭代器失效</li>
<li>容器的内部可能有引用计数</li>
<li>插入、删除操作的回滚能力</li>
</ul>


<p>当然有些细节无需掌握，但就我接触到的C++程序员大都使用STL的最简单用法: 使用vector和map存储一些数据，而对稍微高级点的STL用法麻木无知或畏惧使用：</p>

<ol>
<li>各种容器的区别，如何使用容器兼容C接口</li>
<li>for_each等函数存在的意义，如何写出函数式风格的代码</li>
<li>类的成员函数和同名全局函数的区别，比如set::find与std::find，map::remove与std::remove等等</li>
<li>xxx_if函数的使用，如何写predicate</li>
<li>function&lt;>, bind函数的使用</li>
<li>一些惯用法，比如erase-remove</li>
</ol>


<p>以上是我认为一个合格的C++开发应掌握的STL技巧。而掌握这些技巧，却是需要一段时间的练习，是否这一原因导致了一部分人对STL的无爱？因为即使不掌握这些技巧，功能是同样可以完成的。</p>

<h3>曲高和寡 （风气)</h3>

<p>语言的出现提高了人们交流的效率，设计模式的出现提高了软件人员的交流效率，但前提是交流的双方都懂才行。STL同样如此，我之蜜糖彼之砒霜，在一个不了解STL的团队中大量使用STL尤其是一些稍微“高级另类”的用法，难免遭人排斥。而且别人很难看懂你写的代码，指责你的代码难于维护，这并不是谁的错，这是一个道不同不幸与某的问题。</p>

<p>在一个不用、不了解STL的团队，喜爱STL之人会克制使用STL！</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/04/08/tencent-anniversary/">入职一周年记</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-04-08T23:38:00+08:00" pubdate data-updated="true">2014-04-08</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>现在是2014年4月8日，23点45分，一刻钟后，今天将永不存在。一个小时前，才离开公司，相信现在公司还有同事在吧。今早收到了系统发来的祝贺入职周年的邮件，这一天真的来了，回头看自己竟然咬牙坚持下来了。</p>

<h3>背靠大树好乘凉？</h3>

<p>首先，腾讯确实是一个很好的平台，能作为腾讯的员工还是值得自豪的。公司很正规，这自不必说，各种软硬件环境也都不错，平时联调程序也有机会接触到一些技术水平不错的程序员，公司也基本可以做到重视个人的价值，能者多劳，多劳多得。但现在的部门，偏居杭州，保留了原创业公司团队“拼命”的作风。一年来团队忙的头昏脑胀，产品却并无喜人起色：产品跟着KPI走、偏离了产品本质；需求繁重、时间仓促；技术债越积越多，软件越跑越慢；感觉当前的团队像陷入沼泽的野兽，用力挣扎无奈越陷越深。</p>

<p>个人在这种环境下，心理肯定是矛盾的。团队中大概现在有三类人：其一是，团队早期的成员，产品像他们自己的孩子，孩子病了，他们很清楚，宁可自己吃苦也要给孩子治病（方法正确与否还在其次）；第二种人是，希望产品能做好，但并不太有信心，能做好本职工作，大部分人是这种人；第三种是<a href="http://baike.baidu.com/view/1561482.htm">坏苹果</a>，尤其现在团队的处境下更会放大其危害性。</p>

<h3>千万不要做坏苹果</h3>

<p>自己是第二种人吧。主观上感觉团队中出现了一些烂苹果的味道，至于究竟其行为能否归为烂苹果就见仁见智了。反正其作为真的不符合自己的工作价值观。极个别人：你跟他讲DRY，他给你四处拷贝代码；你跟他说代码可读性好，他给你疯狂用宏；你指出他的Bug，他缩头不理你；到头来代码没写几行，Bug倒永垂不朽的留下! 郭德纲形容同行的话真是不假：</p>

<blockquote><p>&ldquo;你和他讲文化，他和你讲孔子；你和他讲孔子，他和你讲老子；你和他讲老子，他给你装孙子&#8221;。</p></blockquote>

<p>而整个团队呢？技术氛围几无，遇事推诿，任务分配不合理，凭责任心干活！坏苹果会传染，白沙在涅与之俱黑，真的害怕自己也会变得这样。换个角度看，只是别人的行为规范与己迥异而已，没准自己在他人眼中是奇葩呢。子曰:非礼勿视,非礼勿听,非礼勿言,非礼勿动，践行何其难也。</p>

<p>但团队中还是有好多“良心”人物值得自己学习，不管是从技术、还是豁达、还是专业态度上。导师、正副组长都是自己学习的榜样。</p>

<h3>我们为什么要加班？</h3>

<p>有人将加班视为洪水猛兽，但这些人都是大牛，大牛有选择自己工作环境的自由。对于大部分人中国程序员来说，加班是约定俗成。但加班溯源自哪里真的不好说，可能是早期的软件从业者，是真正的喜欢这个行业，喜欢的时候加班也是甜的，所以他们会下班后继续沉浸在自己喜欢的工作中，所以无形中引领了加班之风。个人不反对加班，但仅限于特定时期、特殊情况下的加班加点，讨厌长期因不合理的项目进度安排导致的加班，而过去的一年真的是这样。</p>

<p><strong>工作量 ÷ 工期 > 8 == 加班</strong></p>

<p>工作量和工期都由产品包办制定，需求时间评估前，deadline早已定死，开发时间评估形同虚设，不是量体裁衣却是削足适履。想起<a href="http://www.ituring.com.cn/article/42974">Mac君</a>讲的故事：</p>

<pre><code>乔布斯兴冲冲的从外面冲进来，对沃兹说，『兄弟，咱们得做个XX，你是最佳人选，只要你能做出来，咱就发达了』

善良的沃兹：『没问题，我喜欢这挑战』~~

『唔，我们需要在4天内完成』

『我艹，你没事吧，怎么可能？至少需要两周』

乔布斯不说话含情脉脉的望着沃兹：『You can do it！』

『好吧，十天』
『……』
『好吧，五天』
『……』

『好吧，就4天』

乔布斯吹着口哨走了，沃兹留下来干了4天4夜。
</code></pre>

<p>故事的结尾是，沃兹漂亮的完成了任务。但天才不世出，现实世界真实的结局可能并不如此。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/02/23/mac-shuo-review/">读：人生元编程</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-02-23T22:52:00+08:00" pubdate data-updated="true">2014-02-23</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href='http://www.amazon.cn/gp/product/B00ID5UV30/ref=as_li_tf_tl?ie=UTF8&camp=536&creative=3200&creativeASIN=B00ID5UV30&linkCode=as2&tag=bringmeluck-23' rel='external nofollow' target='_blank'>人生元编程</a>这本书最近很火，所以昨天花了半天的时间在Kindle上翻看了一遍。最近自媒体将网文整理成集出书的很多，这一本也是，作者池建强，自称Mac君。去年就断断续续的跟过Mac君在其<a href="http://macshuo.com/">博客</a>上帖的文章，印象最深的是其能将IT界大佬的故事娓娓道来，颇有吴军之风，更兼Mac君是根正苗红的程序员，所以文章读来倍感亲切，处处体现了其对程序员个体的勉励。</p>

<p>但《人生元编程》书读来的快感并不比直接从Mac君博客上扒拉文章高多少，且大篇幅的Mac技巧、系统配置的内容，有充页数之嫌，直接会被我等俗气的Windows程序员pass。但一本书能找到哪怕一处能启发自己的点足矣，何况此书还是有很多地方还是闪耀着智慧的光泽的：</p>

<ul>
<li>如果你能够把技术文章写好，慢慢就能写出人文类的文字，慢慢你就会发现自己已经站在科技与人文的十字路口了</li>
<li>只有多核或多个CPU才可能发生并行，如果单核单CPU只能发生并发行为</li>
<li>不停的反驳别人不会证明自己的聪明和独立思考，正确的讨论技巧和解决问题才是王道</li>
<li>曾经有位古人说过，如果你手里有一把锤子，所有东西看上去都像钉子。还有一位今人说过，如果你有一个钉子，就会满大街找锤子！</li>
<li>技术岗所受到的待遇普遍是低于相同层级的管理岗位的，</li>
<li>如果我需要别人的意见和建议，那就把自己放空，暂时扔掉偏见和预判，</li>
<li>旅行就是从一个自己待烦了的地方，跑到一个别人待烦了的地方</li>
<li>很多人羡慕创业公司的人获得的财富，他们只不过是把你20年平稳的打工生涯压缩成4年艰苦卓绝的创业</li>
<li>但费力之事自有其好处，人生总要做一些艰难费力的事情，读书也是一样。 写到这儿很多读者要问了，这和</li>
<li>但费力之事自有其好处，人生总要做一些艰难费力的事情</li>
<li>真正强大的Shell是深藏不露的zsh，</li>
</ul>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/2/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>

  



      </div>
    </div>
    <footer class="footer"><p>
  Copyright &copy; 2014 - ToWriting -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span> -
  <span class="credit">Theme by <a href="https://github.com/barmstrong/octopress-bootstrap">Armstrong</a></span> -
  <span class="credit">本站内容采用<a rel="license" href="http://creativecommons.org/licenses/by/3.0/cn/">知识共享署名 3.0 中国大陆许可协议</a>进行许可</span>
</p>
</footer>
    







<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="/assets/bootstrap/js/bootstrap.min.js"></script>



  </div>
</body>
</html>
